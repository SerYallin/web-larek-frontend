# Описание классов.

При разработке проекта было использование следующих классов.

## Базовый код

### Класс `Api`

Базовый класс для работы с API нашего приложения, основными функциями являются получение и отправка данных на сервер с помощью методов `get` и `post`.

#### Конструктор

`constructor(baseUrl: string, options: RequestInit = {})` - конструктор класса. Принимает базовый URL для запросов и опции для запросов. Опции запросов являются необязательными и имеют тип [`RequestInit`](https://developer.mozilla.org/en-US/docs/Web/API/RequestInit) содержат такие опции как `method`, `headers`, `body` и другие.

#### Методы

- `get(uri: string)` - метод для отправки GET-запроса на указанный URL(`uri`). Возвращает Promise, содержащим ответ от сервера.
- `post(uri: string, data: object, method: ApiPostMethods = 'POST')` - метод для отправки POST-запроса на указанный URL(`uri`) с переданными данными(`data`) в виде объекта и методом отправки(`method`) что является необязательным параметром и по умолчанию `POST`. Возвращает Promise, содержащим ответ от сервера.


### Класс `EventEmitter`

Данный класс используется как утилита, которая позволяет управлять подписками на события. и таким образом помогает.

#### Конструктор

`constructor()` - конструктор класса без входных параметров, который инициализирует пустой список для хранения подписчиков на события.

#### Методы

- `on<T extends object>(eventName: EventName, callback: (event: T) => void)` - метод для подписки на событие. в качестве первого параметра принимает название события, в качестве второго - функцию-обработчик события, где в качестве аргумента нужно указать объект события.
- `off(eventName: EventName, callback: Subscriber)` - метод для отписки от события. в качестве первого параметра принимает название события, в качестве второго - функцию - обработчик события. Тип функции - `Subscriber`, который представляет собой функцию(`Function`).
- `emit<T extends object>(eventName: string, data?: T)` - метод инициализации события. в качестве первого параметра принимает название события, в качестве второго - объект данных события.
- `onAll(callback: (event: EmitterEvent) => void)` - метод для подписки на все события. в качестве первого параметра принимает функцию-обработчик события, где в качестве аргумента нужно данные типа `EmitterEvent` содержащие название события и данные события `{ eventName: string, data: unknown }`.
- `offAll()` - метод для отписки от всех событий. Данный метод заново инициализирует пустой список для хранения подписчиков на события, таким образом сбрасывая все подписки.
- `trigger<T extends object>(eventName: string, context?: Partial<T>)` - метод для генерации события. в качестве первого параметра принимает название события, в качестве второго - объект данных события. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса `EventEmitter`.

## Классы моделей данных

### Класс `ProductList`

Класс - модель для работы со списком продуктов по сути это просто коллекция продуктов. Основными функциями данного класса являются только получение списка продуктов. Данный класс является производным от интерфейса `ICollection` и имеет все те-же методы.

#### Конструктор

`constructor(products: TProduct[])` - конструктор класса. Принимает массив продуктов.

#### Методы

- `addItem(itme: TProduct)` - метод добавления продукта в список.
- `getItems(): TProduct[]` - метод получения списка продуктов.
- `getItem(id: number): TProduct | undefined` - метод получения продукта по id.
- `removeItem(id: string): void;` - метод удаления продукта из списка по id.



### Класс `Basket`

Класс - модель для работы с корзиной. Данный клас является так же как и `ProductList` коллекцией продуктов, только с той разницей, что тут у нас добавляются возможности добавлять продукт в коллекцию и удалять продукт из коллекции. Данный класс является потомков от `ProductList` а также имеет интерфейс `BasketCollection`.

#### Конструктор

`constructor(products: TProduct[])` - конструктор класса. Принимает массив продуктов.

#### Методы

- `addItem(itme: TProduct)` - метод добавления продукта в список.
- `getItems(): TProduct[]` - метод получения списка продуктов.
- `getItem(id: number): TProduct | undefined` - метод получения продукта по id.
- `removeItem(id: string): void;` - метод удаления продукта из списка по id.
- `get count()` - геттер количества продуктов в корзине. Используется для отображения количества продуктов в корзине.
- `get totalPrice()` - геттер общей стоимости продуктов в корзине. Используется для отображения общей цены продуктов в корзине.

### Класс `Order`

Класс модель для работы с заказом. Данный клас является потомком от интерфейса `IOrder`.

#### Конструктор

`constructor(basket: IBasketCollection<TProduct>, data: object)` - конструктор класса. Принимает корзину и данные клиента. Данные клиента должны содержать поля `payment`, `phone`, `address`, `email`.

#### Методы

- `setStatus(status: OrderStatus)` - метод для установки статуса заказа. Данный метод вызывается при создании заказа, отправки и получения ответа.
- `getStatus()` - метод для получения статуса заказа.
- `addError(err: string)` - метод для добавления ошибки в заказ. Данный метод вызывается при ошибке при отправке заказа.
- `getErrors()` - метод для получения ошибок в заказе.
- `update(data: object)` - метод для обновления данных заказа.



## Компоненты представления.

Класс - модель для работы с заказом. Основными функциями данного класса отправка заказа на сервер и получение ответа.

### Класс `View`

Базовый клас для вывода элемента на страницу. Основными функциями являются получение данных элемента и вывод его на страницу.

#### Конструктор

`constructor(data: object)` - конструктор класса. Принимает данные элемента.

#### Методы

- `render()` - метод для вывода элемента на страницу.

### Класс `ProductView`

Производный класс от View основной функцией которого является вывод продукта на страницу согласно его типа(карта, детали или корзина).
Данный класс используется при выводе продукта на главной странице, в корзине и в деталях продукта.

#### Конструктор

`constructor(product: TProduct)` - конструктор класса. Принимает данные продукта.

#### Методы

- `render(type: string)` - метод для вывода продукта на страницу в зависимости от типа. Тип отображения может быть карта, детали или корзина(`cart`, `details`, `basket`).

### Класс `BasketView`

Производный класс от View основной функцией которого является вывод корзины на страницу.

#### Конструктор

`constructor(basket: IBasketCollection<TProduct>)` - конструктор класса. Принимает данные корзины.

#### Методы

- `render()` - вывести корзину на страницу.

### Класс `OrderFormView`

Производный класс от View основной функцией которого является вывод формы заказа на страницу.

#### Конструктор

`constructor(data: object)` - конструктор класса. Принимает данные заказа для заполнения формы заказа

#### Методы

- `render()` - вывести ордер на страницы. .

### Класс `SuccessView`

Производный класс от View основной функцией которого является вывод сообщения об успешном заказе на страницу.

#### Конструктор

`constructor(order: IOrder)` - конструктор класса. Выводит статус заказа со следующим сообщением.

#### Методы

- `render()` - вывести результат ордера на страницу